# Figures

- To use special characters, and citations, use text references described in (2.2.4)[https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html#text-references], and alluded to in (2.4)[https://bookdown.org/yihui/bookdown/figures.html]. See figure 1 of chapter 2 for an example.

  - Place text and text reference somewhere, then under the fig.cap option in the relevant figure chunk, insert the text reference
  
*Example code:*

<!-- begin example -->

(ref:textreference) Figure title that appears in text. Figure caption that appears in text.

```{r codechunktitle, fig.cap="(ref:textreference)", eval=T, echo=T, echo=FALSE, fig.align='center', out.extra=''}
knitr::include_graphics('path\to\image')
```

<!-- end example -->

# Tables

Tables are best generated by using `kable` to print the table. That means that tables should be loaded into R as  `data.frame` objects, either through reading in a csv/xlsx/txt file, or through manual creation. 

- See (2.5)[https://bookdown.org/yihui/bookdown/tables.html] for details. Tables are referenced in the same way as figures, through the code chunk label.

*Example code:*

<!-- begin example -->

\captionsetup{width=7in} <!-- this is to make sure the table caption stays in margins -->

```{r BTabS1, eval = FALSE, echo = T, echo=FALSE, warning = FALSE, message=FALSE,  out.extra=''}
readxl::read_csv(here::('Tables', 'appendix-b', 'Table S1.csv')) %>%
  kableExtra::kbl(
  booktabs = TRUE,
  caption = 'Title. Caption.')
```

<!-- end example -->

- For citations within tables, create text reference outside of each cell that contains of a reference. Then insert text references as a column in the table. See chapter 2 tables 1 and 2 as examples. See kableExtra github (issues)[https://github.com/haozhu233/kableExtra/issues/214] for discussion.

  - another option that I DON'T RECOMMEND, is to use `format = 'markdown'`, and then citations can be written as [@author-1999], but then all tables need to be in this format to keep style consistent across whole thesis. I have also found that this format is not as consistent and robust (e.g. text can overlap in columns with no easy fix). Footnotes also don't work with markdown format, so just avoid this option because it causes more problems.

- Figure caption titles are by default not full-width. To make figure captions full-width, add to the YAML of man_script.Rmd:

```
header-includes:
   - \usepackage{caption}
```

and then write "\captionsetup{width=7in}" on the line before the table code chunk. See table 2.1 as an example

- To automatically wrap columns, use `kableExtra::kable_styling(full_width = TRUE)`


- To make columns fit onto the page, try adding this:

`kableExtra::kable_styling(latex_options = "scale_down")`

- If your table is long, and needs to be split into multiple pages, set 
`longtable = TRUE` in the `kable(...)` call. See 13_appendix_A.Rmd for examples

# References

I suggest using zotero. I

I liked using the built-in rstudio reference manager, which has auto-completion / search. It also adds references directly into the bib file.

# Including publications

For my dissertation, my data chapters have been published. Therefore including these published articles require some repetitive formatting and editing. Here I made a checklist of all the steps to completely incorporate these into a broader dissertation context:

-[ ] Copy and paste manuscript text
-[ ] Replace references 
  -[ ] If references are not all in zotero library, you can download a bib file from the online journal article and import that into zotero first
  -[ ] Use markdown visual editor to use the built-in citation manager
-[ ] Copy figures into their individual figure folders (images/ch#)
-[ ] Insert into main text
  -[ ] Figure itself, figure caption (see #Figures above)
-[ ] Replace in-text figure references to a linked reference
